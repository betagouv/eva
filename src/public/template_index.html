<!DOCTYPE html>
<html>
  <head>
    <style>
      .chargement-termine {
        display: none /* cette propriété sera surchagé dans commun.scss qui sera chargé plus tard */
      }
    </style>
    <meta charset="utf-8"/>
    <% if ((process.env.HOTJAR_ID != undefined) && process.env.HOTJAR_ID != '' ) { %>
    <!-- Hotjar Tracking Code for https://app.eva.beta.gouv.fr/ -->
    <script>
      (function(h,o,t,j,a,r){
          h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
          h._hjSettings={hjid:<%= process.env.HOTJAR_ID %>,hjsv:6};
          a=o.getElementsByTagName('head')[0];
          r=o.createElement('script');r.async=1;
          r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
          a.appendChild(r);
      })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
    <% } %>
    <% if ((process.env.MATOMO_ID != undefined) && process.env.MATOMO_ID != '' ) { %>
    <!-- Matomo -->
    <script type="text/javascript">
      var _paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="https://stats.data.gouv.fr/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '<%= process.env.MATOMO_ID %>']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code -->
    <% } %>
    <script type="text/javascript">
      if (window.navigator && 'serviceWorker' in window.navigator) {
        window.addEventListener('load', () => {
          window.navigator.serviceWorker.register('/jeu/service-worker.js').then(registration => {
            console.log('SW registered: ', registration);
          }).catch(registrationError => {
            console.log('SW registration failed: ', registrationError);
          });
        });
      }
    </script>
  </head>
  <body>
    <section class='chargement'>
      Chargement en cours d'eva…
    </section>
    <section class='footer chargement-termine'>
      <h2 class='footer-titre'>eva</h2>
      <div class='footer-code-source'>Le code source <a href="https://github.com/betagouv/eva">est libre</a></div>
    </section>
  </body>
</html>
